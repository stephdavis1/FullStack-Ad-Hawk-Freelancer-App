{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useReducer, useEffect } from 'react';\nimport axios from 'axios';\nconst actions = {\n  make_request: 'make-request',\n  get_data: 'get-data',\n  error: 'error',\n  update_has_next_page: 'update-has-next-page'\n};\nconst baseUrl = 'https://api.allorigins.win/raw?url=https://jobs.github.com/positions.json'; // const baseUrl = 'http://localhost:8080/jobs'\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case actions.make_request:\n      return {\n        loading: true,\n        jobs: []\n      };\n\n    case actions.get_data:\n      return { ...state,\n        loading: false,\n        jobs: action.payload.jobs\n      };\n\n    case actions.error:\n      return { ...state,\n        loading: false,\n        error: action.payload.error,\n        jobs: []\n      };\n\n    case actions.update_has_next_page:\n      return { ...state,\n        hasNextPage: action.payload.hasNextPage\n      };\n\n    default:\n      return state;\n  }\n} // export default function useFilterJobs(jobs) {\n//     const [state, dispatch] = useReducer(filterReducer, { jobs })\n// }\n\n\nexport default function useFetchJobs(params, page) {\n  _s();\n\n  const [state, dispatch] = useReducer(reducer, {\n    jobs: [],\n    loading: true\n  });\n  useEffect(() => {\n    const cancelToken1 = axios.CancelToken.source();\n    dispatch({\n      type: actions.make_request\n    });\n    axios.get(baseUrl, {\n      cancelToken: cancelToken1.token,\n      params: {\n        markdown: true,\n        page: page,\n        ...params\n      }\n    }).then(res => {\n      dispatch({\n        type: actions.get_data,\n        payload: {\n          jobs: res.data\n        }\n      });\n    }).catch(e => {\n      if (axios.isCancel(e)) return;\n      dispatch({\n        type: actions.error,\n        payload: {\n          error: e\n        }\n      });\n    });\n    const cancelToken2 = axios.CancelToken.source();\n    axios.get(baseUrl, {\n      cancelToken: cancelToken2.token,\n      params: {\n        markdown: true,\n        page: page + 1,\n        ...params\n      }\n    }).then(res => {\n      dispatch({\n        type: actions.update_has_next_page,\n        payload: {\n          hasNextPage: res.data.length !== 0\n        }\n      });\n    }).catch(e => {\n      if (axios.isCancel(e)) return;\n      dispatch({\n        type: actions.error,\n        payload: {\n          error: e\n        }\n      });\n    });\n    return () => {\n      cancelToken1.cancel();\n      cancelToken2.cancel();\n    };\n  }, [params, page]);\n  console.log(params);\n  console.log(state); // make a copy of the state\n\n  let stateCopy = { ...state\n  }; // filter out the state.jobs.description based on params.description\n  // stateCopy = stateCopy.jobs.filter((job) => {\n  //     console.log(job)\n  //     return job.title.includes(params.description)\n  // })\n  // save filter results back to state copy\n\n  return stateCopy;\n}\n\n_s(useFetchJobs, \"bRLgDQdNj1tsVgoBhwCNrWgJPwM=\");","map":{"version":3,"sources":["/Users/codeclanstudent/codeclan_work/week_14/finalproject/JS-JAVA-Freelancer-App/client/src/components/Joblists/useFetchJobs.js"],"names":["useReducer","useEffect","axios","actions","make_request","get_data","error","update_has_next_page","baseUrl","reducer","state","action","type","loading","jobs","payload","hasNextPage","useFetchJobs","params","page","dispatch","cancelToken1","CancelToken","source","get","cancelToken","token","markdown","then","res","data","catch","e","isCancel","cancelToken2","length","cancel","console","log","stateCopy"],"mappings":"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","sourcesContent":["import { useReducer, useEffect } from 'react';\nimport axios from 'axios';\n\nconst actions = {\n    make_request: 'make-request',\n    get_data: 'get-data',\n    error: 'error',\n    update_has_next_page: 'update-has-next-page'\n}\nconst baseUrl = 'https://api.allorigins.win/raw?url=https://jobs.github.com/positions.json'\n// const baseUrl = 'http://localhost:8080/jobs'\n\nfunction reducer(state, action) {\n    switch (action.type) {\n        case actions.make_request:\n            return { loading: true, jobs: [] }\n        case actions.get_data:\n            return { ...state, loading: false, jobs: action.payload.jobs }\n        case actions.error:\n            return { ...state, loading: false, error: action.payload.error, jobs: [] }\n        case actions.update_has_next_page:\n            return { ...state, hasNextPage: action.payload.hasNextPage }\n\n        default:\n            return state\n    }\n}\n\n// export default function useFilterJobs(jobs) {\n//     const [state, dispatch] = useReducer(filterReducer, { jobs })\n// }\n\nexport default function useFetchJobs(params, page) {\n    const [state, dispatch] = useReducer(reducer, { jobs: [], loading: true })\n\n    useEffect(() => {\n        const cancelToken1 = axios.CancelToken.source()\n        dispatch({ type: actions.make_request })\n        axios.get(baseUrl, {\n            cancelToken: cancelToken1.token,\n            params: { markdown: true, page: page, ...params }\n        }).then(res => {\n            dispatch({ type: actions.get_data, payload: { jobs: res.data } })\n        }).catch(e => {\n            if (axios.isCancel(e)) return\n            dispatch({ type: actions.error, payload: { error: e } })\n        })\n\n        const cancelToken2 = axios.CancelToken.source()\n        axios.get(baseUrl, {\n            cancelToken: cancelToken2.token,\n            params: { markdown: true, page: page + 1, ...params }\n        }).then(res => {\n            dispatch({ type: actions.update_has_next_page, payload: { hasNextPage: res.data.length !== 0 } })\n        }).catch(e => {\n            if (axios.isCancel(e)) return\n            dispatch({ type: actions.error, payload: { error: e } })\n        })\n\n        return () => {\n            cancelToken1.cancel()\n            cancelToken2.cancel()\n        }\n    }, [params, page])\n\n    console.log(params)\n    console.log(state)\n    // make a copy of the state\n    let stateCopy = { ...state }\n    // filter out the state.jobs.description based on params.description\n    // stateCopy = stateCopy.jobs.filter((job) => {\n    //     console.log(job)\n    //     return job.title.includes(params.description)\n        \n    // })\n    // save filter results back to state copy\n    return stateCopy\n}"]},"metadata":{},"sourceType":"module"}